# Docker éƒ¨ç½²æŒ‡å—

## ğŸ“¦ é•œåƒä¿¡æ¯

### é•œåƒç‰¹æ€§
- **ä¸­æ–‡å­—ä½“æ”¯æŒ**: å†…ç½®æ–‡æ³‰é©¿å¾®ç±³é»‘ã€æ–‡æ³‰é©¿æ­£é»‘ã€Noto CJKç­‰ä¸­æ–‡å­—ä½“
- **å®Œæ•´Rç¯å¢ƒ**: é¢„è£…tidyverseã€ggplot2ã€dplyrç­‰35+åˆ†æåŒ…
- **å¿«é€Ÿæ„å»º**: ä¼˜åŒ–åæ„å»ºæ—¶é—´ä»2.4å°æ—¶å‡å°‘åˆ°2åˆ†é’Ÿ
- **ç”Ÿäº§å°±ç»ª**: åŒ…å«nginxã€å¥åº·æ£€æŸ¥ã€è‡ªåŠ¨é‡å¯ç­‰ç”Ÿäº§ç‰¹æ€§

### é•œåƒå¤§å°
- åç«¯é•œåƒ: ~1.3GB (åŒ…å«å®Œæ•´Rç¯å¢ƒå’Œå­—ä½“)
- å‰ç«¯é•œåƒ: ~52MB (nginx + Vueæ„å»ºäº§ç‰©)

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### æ–¹å¼1: ä¸€é”®éƒ¨ç½²è„šæœ¬
```bash
./docker-deploy.sh
```

### æ–¹å¼2: æ‰‹åŠ¨Docker Compose
```bash
docker-compose up -d
```

### æ–¹å¼3: ä»Docker Hubéƒ¨ç½² (å‘å¸ƒå)
```bash
# è®¾ç½®Dockerç”¨æˆ·å
export DOCKER_USERNAME=your-username

# è¿è¡Œå‘å¸ƒè„šæœ¬
./docker-publish.sh v2.0.0

# ä½¿ç”¨å‘å¸ƒçš„é•œåƒéƒ¨ç½²
mkdir -p data/uploads data/output data/logs
docker-compose -f docker-compose.hub.yml up -d
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç›®å½•ç»“æ„
```
data/
â”œâ”€â”€ uploads/     # ä¸Šä¼ çš„CSVæ–‡ä»¶
â”œâ”€â”€ output/      # åˆ†æç»“æœå’Œå›¾è¡¨
â””â”€â”€ logs/        # ç³»ç»Ÿæ—¥å¿—
```

### ç«¯å£é…ç½®
- å‰ç«¯: 80 (http://localhost)
- åç«¯: 8000 (http://localhost:8000)
- APIæ–‡æ¡£: http://localhost:8000/docs

### ç¯å¢ƒå˜é‡
åç«¯æœåŠ¡æ”¯æŒä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š
- `DEBUG`: è°ƒè¯•æ¨¡å¼ (é»˜è®¤: false)
- `HOST`: ç»‘å®šåœ°å€ (é»˜è®¤: 0.0.0.0)
- `PORT`: ç«¯å£å· (é»˜è®¤: 8000)
- `PYTHONPATH`: Pythonè·¯å¾„ (é»˜è®¤: /app)

**æ³¨æ„**: DeepSeek AIé…ç½®é€šè¿‡å‰ç«¯ç³»ç»Ÿè®¾ç½®é¡µé¢è¿›è¡Œï¼Œæ— éœ€ç¯å¢ƒå˜é‡ã€‚

## ğŸ› æ•…éšœæ’é™¤

### 1. ä¸­æ–‡å­—ä½“é—®é¢˜
å¦‚æœRå›¾è¡¨ä¸­æ–‡æ˜¾ç¤ºå¼‚å¸¸ï¼š
```bash
# æ£€æŸ¥å­—ä½“å®‰è£…
docker exec pressure-backend fc-list | grep -i "wqy\|noto"

# é‡æ–°ç”Ÿæˆå­—ä½“ç¼“å­˜
docker exec pressure-backend fc-cache -fv
```

### 2. RåŒ…ç¼ºå¤±é—®é¢˜
æ£€æŸ¥å…³é”®RåŒ…æ˜¯å¦å®‰è£…ï¼š
```bash
docker exec pressure-backend R -e "library(tidyverse); cat('OK\n')"
```

### 3. ç½‘ç»œè¿æ¥é—®é¢˜
æ£€æŸ¥å®¹å™¨é—´ç½‘ç»œï¼š
```bash
docker network inspect pressure-analysis-system_pressure-network
```

### 4. æƒé™é—®é¢˜
ç¡®ä¿æ•°æ®ç›®å½•æƒé™æ­£ç¡®ï¼š
```bash
chmod 755 data/uploads data/output data/logs
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### å†…å­˜ä½¿ç”¨
- æœ€ä½è¦æ±‚: 2GB
- æ¨èé…ç½®: 4GB
- Råˆ†æè¿‡ç¨‹ä¸­å¯èƒ½å ç”¨è¾ƒå¤šå†…å­˜

### å­˜å‚¨ç©ºé—´
- ç³»ç»Ÿé•œåƒ: ~1.4GB
- è¿è¡Œæ•°æ®: æ ¹æ®åˆ†ææ–‡ä»¶å¤§å°è€Œå®š
- å»ºè®®é¢„ç•™: 5GBä»¥ä¸Š

### ç½‘ç»œè¦æ±‚
- DeepSeek AIæœåŠ¡éœ€è¦ç¨³å®šçš„å¤–ç½‘è¿æ¥
- å†…ç½‘éƒ¨ç½²æ—¶ç¡®ä¿AIåŠŸèƒ½é…ç½®æ­£ç¡®

## ğŸ”„ æ›´æ–°å‡çº§

### æ›´æ–°é•œåƒ
```bash
# åœæ­¢æœåŠ¡
docker-compose down

# æ‹‰å–æœ€æ–°é•œåƒ (å¦‚æœä½¿ç”¨Docker Hub)
docker-compose pull

# é‡æ–°æ„å»º (å¦‚æœæœ¬åœ°æ„å»º)
docker-compose build --no-cache

# å¯åŠ¨æœåŠ¡
docker-compose up -d
```

### æ•°æ®å¤‡ä»½
```bash
# å¤‡ä»½æ•°æ®ç›®å½•
tar -czf backup-$(date +%Y%m%d).tar.gz data/

# æ¢å¤æ•°æ®
tar -xzf backup-20240613.tar.gz
```

## ğŸ” å®‰å…¨å»ºè®®

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
1. **åå‘ä»£ç†**: ä½¿ç”¨nginxæˆ–traefikä½œä¸ºåå‘ä»£ç†
2. **HTTPS**: é…ç½®SSLè¯ä¹¦
3. **é˜²ç«å¢™**: é™åˆ¶ç«¯å£è®¿é—®
4. **å¤‡ä»½**: å®šæœŸå¤‡ä»½æ•°æ®

### ç½‘ç»œå®‰å…¨
1. **å†…ç½‘éƒ¨ç½²**: å»ºè®®åœ¨å†…ç½‘ç¯å¢ƒéƒ¨ç½²
2. **APIå¯†é’¥**: DeepSeek APIå¯†é’¥ä»…å­˜å‚¨åœ¨æµè§ˆå™¨æœ¬åœ°
3. **æ•°æ®éš”ç¦»**: åˆ†ææ•°æ®ä¸ä¼šä¸Šä¼ åˆ°å¤–éƒ¨æœåŠ¡

## ğŸ“ˆ ç›‘æ§è¿ç»´

### å¥åº·æ£€æŸ¥
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
curl http://localhost:8000/health

# æ£€æŸ¥å‰ç«¯çŠ¶æ€
curl http://localhost/

# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker-compose ps
```

### æ—¥å¿—ç®¡ç†
```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs backend
docker-compose logs frontend

# é™åˆ¶æ—¥å¿—å¤§å°
docker-compose logs --tail=100
```

### èµ„æºç›‘æ§
```bash
# æŸ¥çœ‹èµ„æºä½¿ç”¨
docker stats

# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨
du -sh data/

# æ¸…ç†æ—§æ•°æ®
docker system prune -f
```

## ğŸ› ï¸ å®šåˆ¶åŒ–

### ä¿®æ”¹é…ç½®
- ç¼–è¾‘ `docker-compose.yml` ä¿®æ”¹æœåŠ¡é…ç½®
- ç¼–è¾‘ `nginx.conf` ä¿®æ”¹å‰ç«¯ä»£ç†é…ç½®
- ç¼–è¾‘ Dockerfile ä¿®æ”¹é•œåƒæ„å»º

### æ·»åŠ åŠŸèƒ½
- åç«¯: ä¿®æ”¹ `backend/` ç›®å½•ä¸‹çš„ä»£ç 
- å‰ç«¯: ä¿®æ”¹ `frontend/` ç›®å½•ä¸‹çš„ä»£ç 
- Råˆ†æ: ä¿®æ”¹ `backend/r_analysis/` ä¸‹çš„Rè„šæœ¬

### ç¯å¢ƒå˜é‡
åˆ›å»º `.env` æ–‡ä»¶è¿›è¡Œç¯å¢ƒé…ç½®ï¼š
```env
# è°ƒè¯•æ¨¡å¼
DEBUG=false

# æœåŠ¡ç«¯å£
BACKEND_PORT=8000
FRONTEND_PORT=80

# æ•°æ®ç›®å½•
DATA_DIR=./data
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [README.md](README.md) - é¡¹ç›®æ€»ä½“ä»‹ç»
- [APIæ–‡æ¡£](http://localhost:8000/docs) - åç«¯APIæ–‡æ¡£
- [å‰ç«¯ç»„ä»¶æ–‡æ¡£](frontend/README.md) - å‰ç«¯å¼€å‘æ–‡æ¡£
- [Råˆ†ææ–‡æ¡£](backend/r_analysis/README.md) - Rè„šæœ¬è¯´æ˜

---

ğŸ’¡ **æç¤º**: å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·å…ˆæŸ¥çœ‹æ—¥å¿—ï¼Œç„¶åå‚è€ƒæ•…éšœæ’é™¤éƒ¨åˆ†ï¼Œæˆ–æäº¤Issueå¯»æ±‚å¸®åŠ©ã€‚ 