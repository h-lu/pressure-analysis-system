# 压力数据分析系统 - 快速使用指南

## 🚀 5分钟快速开始

### 第一步：准备环境
```r
# 安装必需的R包（首次使用）
install.packages(c("tidyverse", "ggplot2", "plotly", "ggthemr", "showtext", "slider", "broom", "GGally"))
```

### 第二步：准备数据文件
确保您的CSV文件格式如下：
```csv
序号,X,Y,Z,力值
1,97.2,96.4,111,3.6N
2,98.8,101.3,106.6,23.5N
3,107.8,98.8,98.7,48.1N
```

### 第三步：配置参数
在 `pressure_analysis_simple.R` 文件开头修改：
```r
# 数据文件路径
data_file <- "demo_data.csv"  # 改为您的文件名

# 分析参数
target_forces <- c(5, 25, 50)  # 您的目标力值
tolerance_abs <- 2             # 绝对容差 (N)
tolerance_pct <- 5             # 百分比容差 (%)
```

### 第四步：运行分析
```bash
# 在命令行中运行
Rscript pressure_analysis_simple.R

# 或在RStudio中运行
source("pressure_analysis_simple.R")
```

## 📊 核心图表解读

### 🎯 必看图表（前5个）
1. **力值时间序列图** - 查看整体趋势和异常点
2. **力值分布直方图** - 了解数据分布是否正常
3. **力值箱线图** - 快速识别异常值
4. **绝对偏差箱线图** - 查看与目标值的偏差
5. **百分比偏差箱线图** - 查看相对偏差

### 🎯 过程控制图表（重点关注）
6. **Shewhart控制图** - 判断过程是否稳定
7. **移动平均图** - 观察趋势变化
8. **X-bar & R控制图** - 监控均值和变异性

### 🎯 高级分析图表（问题诊断）
23. **CUSUM控制图** - 检测小幅持续偏移
27. **EWMA控制图** - 对小变化敏感
29. **过程能力分析** - 评估过程能力

## 📈 分析结果判断

### 成功率评估标准
- **> 95%**: 🟢 优秀 - 过程表现卓越
- **90-95%**: 🟡 良好 - 过程表现良好
- **80-90%**: 🟠 合格 - 需要关注
- **< 80%**: 🔴 不合格 - 需要立即改进

### 控制图判断
- **所有点在控制限内**: 过程受控
- **连续7点在中心线一侧**: 过程可能失控
- **点超出控制限**: 存在特殊原因

### 趋势分析判断
- **p值 < 0.05**: 存在显著趋势
- **斜率为正**: 上升趋势
- **斜率为负**: 下降趋势

## ⚙️ 参数调整指南

### 容差设置
```r
tolerance_abs <- 2    # 绝对容差：±2N
tolerance_pct <- 5    # 百分比容差：±5%
```
- **绝对容差**: 固定的数值范围
- **百分比容差**: 相对于目标值的百分比
- **实际合格范围**: 两种容差的交集

### 移动窗口大小
```r
window_size <- 10     # 移动平均窗口
```
- **小窗口(5-10)**: 对变化敏感，适合实时监控
- **大窗口(15-30)**: 平滑效果好，适合趋势分析

### 目标力值设置
```r
target_forces <- c(5, 25, 50)  # 根据实际测试点设定
```

## 🔍 常见问题快速解决

### Q1: 中文显示乱码
**解决**: 脚本会自动配置中文字体，如仍有问题：
```r
# 手动设置字体
showtext_auto()
font_add("SimHei", "SimHei.ttf")  # Windows
font_add("PingFang", "PingFang.ttc")  # macOS
```

### Q2: 数据加载失败
**检查**:
- 文件路径是否正确
- CSV格式是否标准
- 文件编码是否为UTF-8

### Q3: 图表不显示
**解决**:
```r
# 确保图形设备正常
dev.off()  # 关闭当前图形设备
# 重新运行脚本
```

### Q4: 内存不足
**解决**:
```r
# 清理内存
rm(list = ls())
gc()
# 减少数据量或增加系统内存
```

## 📋 输出文件说明

### 自动生成的文件
- `cleaned_pressure_data.csv` - 清理后的数据
- `analysis_results.RData` - R分析结果对象
- 各种图表文件 - PNG格式的图表

### 控制台输出
- 数据质量报告
- 统计分析结果
- 趋势分析报告
- 异常检测结果
- 智能建议

## 🎯 使用建议

### 日常监控流程
1. **每日**: 查看图1(时间序列)和图6(控制图)
2. **每周**: 分析图14(成功率趋势)和图15(过程能力)
3. **每月**: 综合评估所有图表和报告

### 问题诊断流程
1. **发现异常** → 查看控制图(6-8)
2. **确认问题** → 分析CUSUM(23)和EWMA(27)
3. **定位原因** → 检查空间分布(9-13)
4. **制定措施** → 参考帕雷托图(18)

### 性能优化建议
- 数据量大时，考虑分批处理
- 定期清理历史数据
- 根据实际需求调整图表数量

---

**💡 提示**: 首次使用建议先用demo_data.csv熟悉系统功能，然后再分析实际数据。 