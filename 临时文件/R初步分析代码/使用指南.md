# 压力数据分析系统 - 快速使用指南

## 🚀 5分钟快速开始

### 第一步：准备数据文件
确保您的CSV文件格式如下：
```csv
序号,X,Y,Z,力值
1,97.2,96.4,111,3.6N
2,98.8,101.3,106.6,23.5N
3,107.8,98.8,98.7,48.1N
```

### 第二步：配置参数
在 `pressure_analysis_simple.R` 文件中修改：
```r
# 修改数据文件路径
data_file <- "your_data.csv"

# 修改目标力值（根据您的实际情况）
target_forces <- c(5, 25, 50)  # 例如：5N, 25N, 50N

# 修改容差设置
tolerance_abs <- 2             # 绝对容差 ±2N
tolerance_pct <- 5             # 百分比容差 ±5%
```

### 第三步：运行分析
```bash
# 在终端中运行
Rscript pressure_analysis_simple.R
```

### 第四步：查看结果
- 🖥️ **图表显示**: 自动弹出29个分析图表
- 📊 **控制台报告**: 详细的文字分析报告
- 📁 **输出文件**: 
  - `cleaned_pressure_data.csv` - 清理后的数据
  - `analysis_results.RData` - 分析结果

## 📊 核心图表解读

### 🎯 日常必看图表（前4个）
1. **时间序列图** - 看趋势和异常点
2. **分布直方图** - 看数据分布是否正常
3. **箱线图** - 快速识别异常值
4. **Shewhart控制图** - 看过程是否稳定

### 🔍 问题诊断图表
- **CUSUM图** - 检测小幅持续偏移
- **EWMA图** - 对小变化敏感
- **帕雷托图** - 找出主要问题原因
- **3D散点图** - 空间分布异常

## ⚠️ 常见问题

### Q1: 脚本运行报错缺少包？
**解决**: 脚本会自动安装缺失的包，如果失败请手动安装：
```r
install.packages(c("tidyverse", "ggthemr", "plotly", "GGally"))
```

### Q2: 数据格式不对？
**解决**: 确保：
- CSV文件有表头：`序号,X,Y,Z,力值`
- 力值列可以包含单位（如"3.6N"），脚本会自动清理
- 没有空行或特殊字符

### Q3: 目标力值识别错误？
**解决**: 手动设置目标力值：
```r
target_forces <- c(你的目标值1, 你的目标值2, 你的目标值3)
```

### Q4: 图表显示乱码？
**解决**: 确保系统支持中文字体，或修改字体设置：
```r
# 在脚本开头修改字体
font_add("SimHei", "SimHei.ttf")  # Windows
font_add("PingFang", "/System/Library/Fonts/PingFang.ttc")  # macOS
```

## 📈 分析结果判断标准

### ✅ 系统正常指标
- 成功率 > 95%
- Cp/Cpk > 1.33
- 控制图无失控点
- 无显著趋势（p值 > 0.05）

### ⚠️ 需要关注指标
- 成功率 80-95%
- Cp/Cpk 1.0-1.33
- 偶有失控点
- 轻微趋势

### 🚨 需要立即处理
- 成功率 < 80%
- Cp/Cpk < 1.0
- 控制图频繁失控
- 显著趋势（p值 < 0.05）

## 🔧 参数调整建议

### 容差设置
```r
# 严格要求
tolerance_abs <- 1    # ±1N
tolerance_pct <- 2    # ±2%

# 一般要求
tolerance_abs <- 2    # ±2N
tolerance_pct <- 5    # ±5%

# 宽松要求
tolerance_abs <- 3    # ±3N
tolerance_pct <- 10   # ±10%
```

### 移动窗口大小
```r
window_size <- 5      # 小窗口，敏感
window_size <- 10     # 中等窗口，平衡
window_size <- 20     # 大窗口，平滑
```

## 📞 技术支持

如遇到问题，请检查：
1. R版本 >= 4.0
2. 数据文件路径正确
3. 数据格式符合要求
4. 网络连接正常（用于下载包）

---

**💡 提示**: 首次运行可能需要几分钟安装依赖包，后续运行会很快。建议先用提供的 `demo_data.csv` 测试系统是否正常工作。 