# 压力系统 - 空间异常可视化方法说明

## 概述

这里总结了显示xyz坐标下不同target_force异常情况的7种主要可视化方法，每种方法都有其独特的优势和适用场景。

---

## 1. 3D交互式散点图 📊

### 特点
- **类型**: 交互式3D可视化 (Plotly)
- **维度**: 完整3D空间显示
- **交互性**: 可旋转、缩放、悬停查看详情

### 适用场景
✅ **最佳用于**:
- 直观了解整体空间分布
- 识别3D空间中的异常聚集区域
- 演示和报告展示

### 显示信息
- XYZ坐标位置
- 目标力值分组（颜色）
- 异常状态（形状：空心圆=异常，实心圆=正常）
- 悬停详情：序号、坐标、力值、偏差、状态

### 代码示例
```r
plot_ly(data, x = ~x, y = ~y, z = ~z,
        color = ~factor(target_force),
        symbol = ~within_tolerance)
```

---

## 2. 2D投影组合图 📈

### 特点
- **类型**: 传统2D散点图组合
- **维度**: 3个2D投影（XY、XZ、YZ）
- **信息密度**: 高，用点大小表示第三维度

### 适用场景
✅ **最佳用于**:
- 静态报告和文档
- 详细分析各平面的异常模式
- 打印输出

### 显示信息
- 三个投影平面的分布
- 点大小表示偏差大小
- 形状表示异常状态
- 颜色表示目标力值

### 优势
- 不需要交互，适合打印
- 可以清楚看到各个平面的投影模式
- 容易发现平面内的聚集和异常

---

## 3. 空间密度热力图 🌡️

### 特点
- **类型**: 密度等高线 + 散点标记
- **维度**: 2D（XY平面）+ 分面
- **分面**: 按目标力值分组

### 适用场景
✅ **最佳用于**:
- 发现数据密集区域
- 识别"热点"和"冷点"
- 空间密度分析

### 显示信息
- XY平面的数据密度分布
- 异常点的空间位置
- 不同目标力值的分布差异

### 独特价值
- 显示数据密度梯度
- 容易识别高密度区域的异常率
- 适合发现局部异常聚集

---

## 4. 异常聚类分析图 🎯

### 特点
- **类型**: 聚类分析 + 异常检测
- **算法**: 层次聚类（Ward方法）
- **信息**: 空间聚类 + 异常状态

### 适用场景
✅ **最佳用于**:
- 发现空间聚类模式
- 分析异常的空间相关性
- 质量控制区域划分

### 显示信息
- 6个空间聚类区域（颜色）
- 点大小表示百分比偏差
- 形状表示异常状态
- 分面显示不同目标力值

### 分析价值
- 识别高异常率的空间聚类
- 为质量控制提供区域划分建议
- 发现空间相关的系统性问题

---

## 5. 坐标对比矩阵 📊

### 特点
- **类型**: 成对散点图矩阵
- **维度**: 所有XYZ坐标对的关系
- **密度**: 对角线显示单变量密度

### 适用场景
✅ **最佳用于**:
- 分析坐标间的相关性
- 发现系统性偏差模式
- 探索性数据分析

### 显示信息
- XY、XZ、YZ的成对关系
- 每个坐标的边际分布
- 异常点在各维度的表现

### 分析价值
- 发现坐标间的相关性
- 识别异常点的多维特征
- 了解数据的整体分布结构

---

## 6. 异常率空间分布图 🎈

### 特点
- **类型**: 3D气泡图
- **网格化**: 空间网格聚合
- **气泡大小**: 表示数据点数量

### 适用场景
✅ **最佳用于**:
- 显示空间异常率梯度
- 网格化质量评估
- 识别高风险空间区域

### 显示信息
- 网格化的异常率分布
- 气泡大小表示数据密度
- Z轴表示异常率百分比

### 独特价值
- 网格化简化了复杂的空间分布
- 直观显示异常率的空间梯度
- 适合制定空间质量控制策略

---

## 比较总结

| 方法 | 交互性 | 信息密度 | 适用阶段 | 主要用途 |
|------|--------|----------|----------|----------|
| 3D交互图 | 高 | 中 | 探索/演示 | 整体空间理解 |
| 2D投影组合 | 低 | 高 | 分析/报告 | 详细平面分析 |
| 密度热力图 | 低 | 中 | 探索 | 密度分布分析 |
| 聚类分析图 | 低 | 高 | 分析 | 空间聚类发现 |
| 坐标对比矩阵 | 低 | 高 | 探索 | 相关性分析 |
| 异常率分布图 | 中 | 中 | 决策 | 风险区域识别 |

---

## 使用建议

### 🔍 **探索阶段**
1. 首先查看 **3D交互图** 获得整体印象
2. 使用 **坐标对比矩阵** 分析变量关系
3. 通过 **密度热力图** 了解数据分布

### 📊 **分析阶段**
1. 使用 **2D投影组合** 进行详细分析
2. 通过 **聚类分析图** 发现空间模式
3. 利用 **异常率分布图** 识别风险区域

### 📋 **报告阶段**
1. **2D投影组合** 适合静态报告
2. **3D交互图** 适合动态演示
3. **聚类分析图** 提供决策建议

### 💡 **特殊应用**
- **质量控制**: 聚类分析图 + 异常率分布图
- **设备校准**: 坐标对比矩阵 + 2D投影组合
- **故障诊断**: 密度热力图 + 3D交互图

---

## 技术实现

### R包依赖
```r
library(tidyverse)  # 数据处理和基础绘图
library(plotly)     # 交互式3D图表
library(GGally)     # 坐标对比矩阵
library(patchwork)  # 图表组合
```

### 性能考虑
- **数据量 < 1000**: 所有方法都适用
- **数据量 1000-10000**: 避免密度图，简化聚类
- **数据量 > 10000**: 推荐采样或网格化

### 输出格式
- **交互式**: HTML（plotly图表）
- **静态**: PNG/PDF（ggplot2图表）
- **报告**: 组合使用多种格式

---

这套可视化方法覆盖了从探索到决策的完整分析流程，可以根据具体需求选择最合适的方法。 